{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport axios from 'axios';\nimport config from './config';\naxios.defaults.baseURL = config.requestBaseURL;\naxios.defaults.withCredentials = false;\naxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest';\naxios.defaults.headers.post['Content-Type'] = 'application/json';\naxios.interceptors.response.use(res => {\n  if (config.isServer) return res.data || res;\n\n  if (typeof res.data !== 'object') {\n    console.error('数据格式响应错误:', res.data);\n\n    _message.error('服务端异常！');\n\n    return _Promise.reject(res);\n  }\n\n  if (res.data.errcode) {\n    if (res.data.message) _message.error(res.data.message);\n    return _Promise.reject(res.data.data);\n  }\n\n  return res.data.data;\n});\nexport default axios;","map":{"version":3,"sources":["/Users/cxy/code/nick-blog/utils/axios.js"],"names":["axios","config","defaults","baseURL","requestBaseURL","withCredentials","headers","post","interceptors","response","use","res","isServer","data","console","error","reject","errcode","message"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,OAAOC,MAAP,MAAmB,UAAnB;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyBF,MAAM,CAACG,cAAhC;AACAJ,KAAK,CAACE,QAAN,CAAeG,eAAf,GAAiC,KAAjC;AACAL,KAAK,CAACE,QAAN,CAAeI,OAAf,CAAuB,kBAAvB,IAA6C,gBAA7C;AACAN,KAAK,CAACE,QAAN,CAAeI,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,kBAA9C;AAEAP,KAAK,CAACQ,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgCC,GAAG,IAAI;AACrC,MAAIV,MAAM,CAACW,QAAX,EAAqB,OAAOD,GAAG,CAACE,IAAJ,IAAYF,GAAnB;;AACrB,MAAI,OAAOA,GAAG,CAACE,IAAX,KAAoB,QAAxB,EAAkC;AAChCC,IAAAA,OAAO,CAACC,KAAR,CAAc,WAAd,EAA2BJ,GAAG,CAACE,IAA/B;;AACA,aAAQE,KAAR,CAAc,QAAd;;AACA,WAAO,SAAQC,MAAR,CAAeL,GAAf,CAAP;AACD;;AACD,MAAIA,GAAG,CAACE,IAAJ,CAASI,OAAb,EAAsB;AACpB,QAAIN,GAAG,CAACE,IAAJ,CAASK,OAAb,EAAsB,SAAQH,KAAR,CAAcJ,GAAG,CAACE,IAAJ,CAASK,OAAvB;AACtB,WAAO,SAAQF,MAAR,CAAeL,GAAG,CAACE,IAAJ,CAASA,IAAxB,CAAP;AACD;;AACD,SAAOF,GAAG,CAACE,IAAJ,CAASA,IAAhB;AACD,CAZD;AAcA,eAAeb,KAAf","sourcesContent":["import axios from 'axios'\nimport { message } from 'antd'\n\nimport config from './config'\n\naxios.defaults.baseURL = config.requestBaseURL\naxios.defaults.withCredentials = false\naxios.defaults.headers['X-Requested-With'] = 'XMLHttpRequest'\naxios.defaults.headers.post['Content-Type'] = 'application/json'\n\naxios.interceptors.response.use(res => {\n  if (config.isServer) return res.data || res\n  if (typeof res.data !== 'object') {\n    console.error('数据格式响应错误:', res.data)\n    message.error('服务端异常！')\n    return Promise.reject(res)\n  }\n  if (res.data.errcode) {\n    if (res.data.message) message.error(res.data.message)\n    return Promise.reject(res.data.data)\n  }\n  return res.data.data\n})\n\nexport default axios\n"]},"metadata":{},"sourceType":"module"}